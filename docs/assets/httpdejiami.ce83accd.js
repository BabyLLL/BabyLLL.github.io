import{_ as e}from"./Blog.vue_vue&type=script&setup=true&lang.39d150f4.js";import{l as a,o as l,m as t,h as r,a as n,k as i}from"./vendor.14139df1.js";import"./app.108283c1.js";const u=n("div",{class:"prose m-auto"},[n("h2",{id:"归纳",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#归纳","aria-hidden":"true"},"#"),i(" 归纳")]),n("ol",null,[n("li",null,"摘要算法用来实现完整性，能够为数据生成独一无二的“指纹”，常用的算法是 SHA-2；"),n("li",null,"数字签名是私钥对摘要的加密，可以由公钥解密后验证，实现身份认证和不可否认；"),n("li",null,"公钥的分发需要使用数字证书，必须由 CA 的信任链来验证，否则就是不可信的；"),n("li",null,"作为信任链的源头 CA 有时也会不可信，解决办法有 CRL、OCSP，还有终止信任。")]),n("h2",{id:"摘要算法",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#摘要算法","aria-hidden":"true"},"#"),i(" 摘要算法")]),n("p",null,"实现完整性的手段主要是摘要算法（Digest Algorithm），也就是常说的散列函数、哈希函数（Hash Function）。"),n("p",null,"摘要算法实际上是把数据从一个“大空间”映射到了“小空间”，所以就存在“冲突”（collision，也叫碰撞）的可能性，就如同现实中的指纹一样，可能会有两份不同的原文对应相同的摘要。好的摘要算法必须能够“抵抗冲突”，让这种可能性尽量地小。"),n("p",null,"推荐使用sha-2"),n("h2",{id:"完整性",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#完整性","aria-hidden":"true"},"#"),i(" 完整性")]),n("p",null,"真正的完整性必须要建立在机密性之上，在混合加密系统里用会话密钥加密消息和摘要，这样黑客无法得知明文，也就没有办法动手脚了。"),n("p",null,"这有个术语，叫哈希消息认证码（HMAC）。"),n("p",null,[n("img",{src:"https://static001.geekbang.org/resource/image/c2/96/c2e10e9afa1393281b5633b1648f2696.png",alt:""})]),n("h2",{id:"数字签名",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#数字签名","aria-hidden":"true"},"#"),i(" 数字签名")]),n("blockquote",null,[n("p",null,"保证双方身份问题")]),n("p",null,"这个东西就是非对称加密里的“私钥”，使用私钥再加上摘要算法，就能够实现“数字签名”，同时实现“身份认证”和“不可否认”。"),n("p",null,[n("img",{src:"https://static001.geekbang.org/resource/image/84/d2/84a79826588ca35bf6ddcade027597d2.png",alt:""})]),n("p",null,"这两个行为也有专用术语，叫做“签名”和“验签”。"),n("h2",{id:"数字证书和ca",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#数字证书和ca","aria-hidden":"true"},"#"),i(" 数字证书和CA")]),n("blockquote",null,[n("p",null,"因为公钥是公开的，需要确认公钥的可信程度")]),n("p",null,"引入“外力”，找一个公认的可信第三方，让它作为“信任的起点，递归的终点”，构建起公钥的信任链。"),n("p",null,"这个“第三方”就是我们常说的 CA（Certificate Authority，证书认证机构）。它就像网络世界里的公安局、教育部、公证中心，具有极高的可信度，由它来给各个公钥签名，用自身的信誉来保证公钥无法伪造，是可信的。"),n("p",null,"CA 对公钥的签名认证也是有格式的，不是简单地把公钥绑定在持有者身份上就完事了，还要包含序列号、用途、颁发者、有效时间等等，把这些打成一个包再签名，完整地证明公钥关联的各种信息，形成“数字证书”（Certificate）。"),n("h2",{id:"证书体系的弱点",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#证书体系的弱点","aria-hidden":"true"},"#"),i(" 证书体系的弱点")]),n("p",null,"证书体系（PKI，Public Key Infrastructure）虽然是目前整个网络世界的安全基础设施，但绝对的安全是不存在的，它也有弱点，还是关键的“信任”二字。"),n("p",null,"需要打补丁"),n("ol",null,[n("li",null,"开发出了 CRL（证书吊销列表，Certificate revocation list）和 OCSP（在线证书状态协议，Online Certificate Status Protocol），及时废止有问题的证书。"),n("li",null,"因为涉及的证书太多，就只能操作系统或者浏览器从根上“下狠手”了，撤销对 CA 的信任，列入“黑名单”，这样它颁发的所有证书就都会被认为是不安全的")])],-1),o={setup(n,{expose:i}){const o={title:"25 | 固若金汤的根本（下）：数字签名与证书",date:"2021-11-05T16:00:00.000Z",duration:"10min",meta:[{property:"og:title",content:"25 | 固若金汤的根本（下）：数字签名与证书"}]};i({frontmatter:o});return a({title:"25 | 固若金汤的根本（下）：数字签名与证书",meta:[{property:"og:title",content:"25 | 固若金汤的根本（下）：数字签名与证书"}]}),(a,n)=>{const i=e;return l(),t(i,{frontmatter:o},{default:r((()=>[u])),_:1})}}};export{o as default};
