import{_ as l}from"./Blog.vue_vue&type=script&setup=true&lang.82fd3b42.js";import{l as e,o as a,m as n,h as r,a as t,k as i}from"./vendor.14139df1.js";import"./app.8bfb0605.js";const u=t("div",{class:"prose m-auto"},[t("h2",{id:"归纳",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#归纳","aria-hidden":"true"},"#"),i(" 归纳")]),t("ol",null,[t("li",null,"域名使用字符串来代替 IP 地址，方便用户记忆，本质上一个名字空间系统；"),t("li",null,"DNS 就像是我们现实世界里的电话本、查号台，统管着互联网世界里的所有网站，是一个“超级大管家”；"),t("li",null,"DNS 是一个树状的分布式查询系统，但为了提高查询效率，外围有多级的缓存；"),t("li",null,"使用 DNS 可以实现基于域名的负载均衡，既可以在内网，也可以在外网。")]),t("h2",{id:"域名的形式",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#域名的形式","aria-hidden":"true"},"#"),i(" 域名的形式")]),t("p",null,"最右边的被称为“顶级域名”，然后是“二级域名”，层级关系向左依次降低，到最左边为主机名"),t("h2",{id:"域名解析",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#域名解析","aria-hidden":"true"},"#"),i(" 域名解析")]),t("p",null,"就像 IP 地址必须转换成 MAC 地址才能访问主机一样，域名也必须要转换成 IP 地址，这个过程就是“域名解析”。"),t("p",null,"DNS 的核心系统是一个三层的树状、分布式服务，基本对应域名的结构："),t("ol",null,[t("li",null,"根域名服务器（Root DNS Server）：管理顶级域名服务器，返回“com”“net”“cn”等顶级域名服务器的 IP 地址；"),t("li",null,"顶级域名服务器（Top-level DNS Server）：管理各自域名下的权威域名服务器，比如 com 顶级域名服务器可以返回 apple.com 域名服务器的 IP 地址；"),t("li",null,"权威域名服务器（Authoritative DNS Server）：管理自己域名下主机的 IP 地址，比如 apple.com 权威域名服务器可以返回 www.apple.com 的 IP 地址。")]),t("p",null,[t("img",{src:"https://static001.geekbang.org/resource/image/6b/f2/6b020454987543efdd1cf6ddec784bf2.png",alt:"三层树状结构"})]),t("h2",{id:"缓存",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#缓存","aria-hidden":"true"},"#"),i(" 缓存")]),t("p",null,"许多大公司、网络运行商都会建立自己的 DNS 服务器，作为用户 DNS 查询的代理，代替用户访问核心 DNS 系统。这些“野生”服务器被称为“非权威域名服务器”，可以缓存之前的查询结果，如果已经有了记录，就无需再向根服务器发起查询，直接返回对应的 IP 地址。"),t("ul",null,[t("li",null,"这些 DNS 服务器的数量要比核心系统的服务器多很多，而且大多部署在离用户很近的地方。比较知名的 DNS 有 Google 的“8.8.8.8”，Microsoft 的“4.2.2.1”，还有 CloudFlare 的“1.1.1.1”等等。")]),t("p",null,"操作系统里也会对 DNS 解析结果做缓存，如果你之前访问过“www.apple.com”，那么下一次在浏览器里再输入这个网址的时候就不会再跑到 DNS 那里去问了，直接在操作系统里就可以拿到 IP 地址。"),t("h2",{id:"域名新玩法",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#域名新玩法","aria-hidden":"true"},"#"),i(" 域名新玩法")]),t("ol",null,[t("li",null,"重定向"),t("li",null,"域名空间"),t("li",null,[i("负载均衡 "),t("ul",null,[t("li",null,"因为域名解析可以返回多个 IP 地址，所以一个域名可以对应多台主机，客户端收到多个 IP 地址后，就可以自己使用轮询算法依次向服务器发起请求，实现负载均衡。"),t("li",null,"域名解析可以配置内部的策略，返回离客户端最近的主机，或者返回当前服务质量最好的主机，这样在 DNS 端把请求分发到不同的服务器，实现负载均衡。")])])]),t("p",null,"恶意DNS"),t("ul",null,[t("li",null,"“域名屏蔽”，对域名直接不解析，返回错误，让你无法拿到 IP 地址，也就无法访问网站；"),t("li",null,"“域名劫持”，也叫“域名污染”，你要访问 A 网站，但 DNS 给了你 B 网站。")]),t("h2",{id:"查找dns过程",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#查找dns过程","aria-hidden":"true"},"#"),i(" 查找DNS过程")]),t("p",null,"浏览器DNS缓存->操作系统缓存->Hosts文件->非权威域名服务器->根域名服务器->顶级域名服务器->权威域名服务器。")],-1),o={setup(t,{expose:i}){const o={title:"06 | 域名里有哪些门道？",date:"2021-09-28T16:00:00.000Z",duration:"10min",meta:[{property:"og:title",content:"06 | 域名里有哪些门道？"}]};i({frontmatter:o});return e({title:"06 | 域名里有哪些门道？",meta:[{property:"og:title",content:"06 | 域名里有哪些门道？"}]}),(e,t)=>{const i=l;return a(),n(i,{frontmatter:o},{default:r((()=>[u])),_:1})}}};export{o as default};
