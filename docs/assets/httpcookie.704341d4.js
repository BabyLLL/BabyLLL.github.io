import{_ as e}from"./Blog.vue_vue&type=script&setup=true&lang.c7e0c2a9.js";import{l,o,m as i,h as a,a as n,k as t}from"./vendor.14139df1.js";import"./app.e930e480.js";const r=n("div",{class:"prose m-auto"},[n("h2",{id:"归纳",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#归纳","aria-hidden":"true"},"#"),t(" 归纳")]),n("ol",null,[n("li",null,"Cookie 是服务器委托浏览器存储的一些数据，让服务器有了“记忆能力”；"),n("li",null,"响应报文使用 Set-Cookie 字段发送“key=value”形式的 Cookie 值；"),n("li",null,"请求报文里用 Cookie 字段发送多个 Cookie 值；"),n("li",null,"为了保护 Cookie，还要给它设置有效期、作用域等属性，常用的有 Max-Age、Expires、Domain、HttpOnly 等；"),n("li",null,"Cookie 最基本的用途是身份识别，实现有状态的会话事务。")]),n("h2",{id:"什么是cookie",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#什么是cookie","aria-hidden":"true"},"#"),t(" 什么是cookie")]),n("blockquote",null,[n("p",null,"帮助服务器有了记忆的功能。")]),n("h2",{id:"cookie的工作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cookie的工作","aria-hidden":"true"},"#"),t(" cookie的工作")]),n("p",null,"响应头字段 Set-Cookie 和请求头字段 Cookie。"),n("p",null,"格式为 key=value 的形式"),n("p",null,"不过因为服务器的“记忆能力”实在是太差，一张小纸条经常不够用。所以，服务器有时会在响应头里添加多个 Set-Cookie，存储多个“key=value”。但浏览器这边发送时不需要用多个 Cookie 字段，只要在一行里用“;”隔开就行。"),n("p",null,[n("img",{src:"https://static001.geekbang.org/resource/image/9f/a4/9f6cca61802d65d063e24aa9ca7c38a4.png",alt:""})]),n("p",null,[n("img",{src:"https://static001.geekbang.org/resource/image/da/9f/da9b39d88ddd717a6e3feb6637dc3f9f.png",alt:""})]),n("p",null,[n("img",{src:"https://static001.geekbang.org/resource/image/9d/5d/9dbb8b490714360475911ca04134df5d.png",alt:""})]),n("h2",{id:"cookie的属性",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cookie的属性","aria-hidden":"true"},"#"),t(" cookie的属性")]),n("ol",null,[n("li",null,[n("p",null,"生命周期"),n("ul",null,[n("li",null,"Expires: 俗称“过期时间”，用的是绝对时间点，可以理解为“截止日期”（deadline）"),n("li",null,"Max-Age: 用的是相对时间，单位是秒，浏览器用收到报文的时间点再加上 Max-Age，就可以得到失效的绝对时间。"),n("li",null,"Max-Age优先级高")])]),n("li",null,[n("p",null,"cookie域")]),n("li",null,[n("p",null,"HttpOnly: 禁止js读取")]),n("li",null,[n("p",null,"SameSite: 可以防范“跨站请求伪造”（XSRF）攻击")]),n("li",null,[n("p",null,"Secure: 表示这个 Cookie 仅能用 HTTPS 协议加密传输，明文的 HTTP 协议会禁止发送。但 Cookie 本身不是加密的，浏览器里还是以明文的形式存在。")])]),n("h2",{id:"cookie应用",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cookie应用","aria-hidden":"true"},"#"),t(" cookie应用")]),n("ol",null,[n("li",null,[n("p",null,"身份标识"),n("ul",null,[n("li",null,"比如，你用账号和密码登录某电商，登录成功后网站服务器就会发给浏览器一个 Cookie，内容大概是“name=yourid”，这样就成功地把身份标签贴在了你身上。")])]),n("li",null,[n("p",null,"广告跟踪")])])],-1),u={setup(n,{expose:t}){const u={title:"19 | 让我知道你是谁：HTTP的Cookie机制",date:"2021-10-29T16:00:00.000Z",duration:"10min",meta:[{property:"og:title",content:"19 | 让我知道你是谁：HTTP的Cookie机制"}]};t({frontmatter:u});return l({title:"19 | 让我知道你是谁：HTTP的Cookie机制",meta:[{property:"og:title",content:"19 | 让我知道你是谁：HTTP的Cookie机制"}]}),(l,n)=>{const t=e;return o(),i(t,{frontmatter:u},{default:a((()=>[r])),_:1})}}};export{u as default};
